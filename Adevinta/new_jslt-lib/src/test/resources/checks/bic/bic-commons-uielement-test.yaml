tests:
  - name: bic-commons-uielement.jslt compiles and runs
    type: compile
    expression: |
      import "checks/bic/bic-commons-uielement.jslt" as c
      c(.)

  - name: bic-commons-uielement.jslt check-object-url returns false if is null
    expected:
      - quality.check:
          tags:
            check-suite: bic.ad-create
            check-name: object_url_is_not_null
            check-result: 'false'
            check-impact: critical
          delta: 1
    expression: |
      import "checks/bic/bic-commons-uielement.jslt" as c
      let event =
        {
          "@type": "Create",
          "object": {
            "@type": "ClassifiedAd",
            "url": null
          }
        }

      c:check-object-url($event, "bic.ad-create", "ad-create", {})
  - name: bic-commons-uielement.jslt check-object-id returns false if is null
    expected:
      - quality.check:
          tags:
            check-suite: bic.ad-phone-called
            check-name: object_id_is_not_null
            check-result: 'false'
            check-impact: minor
          delta: 1
    expression: |
      import "checks/bic/bic-commons-uielement.jslt" as c
      let event =
        {
          "@type": "Call",
          "object": {
            "inReplyTo": {
              "@type": "ClassifiedAd"
            },
            "@type": "PhoneContact",
            "id": null
          }
        }

      c:check-object-id($event, "bic.ad-phone-called", "ad-phone-called", {})